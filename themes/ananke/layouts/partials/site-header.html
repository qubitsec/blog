<header>
  {{/* 언어 설정 */}}
  {{ $lang := .Site.Language.Lang }}

  {{/* URL 값 가져오기 (fallback 처리 추가) */}}
  {{ $url := .Path }}
  {{ if not $url }}
    {{ $url = "default" }}
  {{ end }}

  {{/* URL을 정규화 */}}
  {{ $normalizedUrl := $url | replace "/" "-" | trim "-" }}

  {{/* 이미지 경로 생성 */}}
  {{ $imagePath := printf "/images/%s%s.jpg" $lang $normalizedUrl }}
  {{ $defaultLangImage := printf "/images/%s-bg.jpg" $lang }}

  {{/* 파일 존재 확인 및 최종 이미지 결정 */}}
  {{ $backgroundImage := $imagePath }}
  {{ if not (fileExists (printf "static%s" $imagePath)) }}
    {{ $backgroundImage = $defaultLangImage }}
  {{ end }}

  {{/* 디버깅 정보 출력 */}}
  <!-- Debug Information -->
  <!-- Lang: {{ $lang }}, URL: {{ $url }}, NormalizedUrl: {{ $normalizedUrl }}, ImagePath: {{ $imagePath }}, DefaultLangImage: {{ $defaultLangImage }}, Final BackgroundImage: {{ $backgroundImage }} -->

  <header class="cover bg-center" style="background-image: url('{{ $backgroundImage }}');">
    <div class="{{ .Site.Params.background_color_class | default "bg-black" }}">
      {{ partial "site-navigation.html" . }}
    </div>
  </header>
</header>
