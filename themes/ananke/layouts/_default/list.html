{{ define "main" }}
  <article class="pa3 pa4-ns nested-copy-line-height">
    <section class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy {{ $.Param "text_color" | default "mid-gray" }}">
      {{- .Content -}}
    </section>

    <section class="flex-ns flex-wrap justify-around mt5">
      {{ range .Paginator.Pages }}
        <div class="relative w-100 w-30-l mb4 bg-white br3 shadow-1" style="overflow: hidden;">

          <!-- Featured Image -->
          {{ $featured_image := partial "func/GetFeaturedImage.html" . }}
          {{ if $featured_image }}
          <a href="{{ .Permalink }}" class="db">
            <img src="{{ $featured_image }}" alt="{{ .Title }}" 
                 class="w-100 db br--top" style="height: 180px; object-fit: cover;">
          </a>
          {{ end }}

          <!-- Content Section -->
          <div class="pa3">
            <!-- Title -->
            <h2 class="f4 fw6 mt0 mb3 lh-title">
              <a href="{{ .Permalink }}" class="link near-black dim">{{ .Title }}</a>
            </h2>

            <!-- Summary -->
            <p class="f6 lh-copy mid-gray">
              {{ if .Summary }}
                {{ .Summary | safeHTML | truncate 150 "..." }}
              {{ else }}
                {{ .Plain | truncate 150 "..." }}
              {{ end }}
            </p>

            <!-- Read More Link -->
            <a href="{{ .Permalink }}" 
               class="link ba b--moon-gray bg-light-gray br2 hover-bg-moon-gray black-70 f6 tc pv2 ph3 mt3" 
               style="width: 30%; display: inline-block; text-align: center;">
               {{ i18n "readMore" }}
            </a>
          </div>
        </div>
      {{ end }}
    </section>

    <!-- Pagination -->
    <div class="w-100 tc mv4">
      {{- template "_internal/pagination.html" . -}}
    </div>
  </article>
{{ end }}
