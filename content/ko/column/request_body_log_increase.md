---
title: "요청 본문 로그 저장 시 용량 증가율 분석"
date: 2023-05-05T10:37:00
draft: false
description: "요청 본문(Post-body)을 로그로 남길 경우 로그 용량 증가율과 스토리지 요구 사항을 분석합니다."
featured_image: "cdn/column/request_body_log_increase.jpg"
tags: ["요청 본문", "Post-body", "Request-body", "로그 분석"]
---

### 📝 요청 본문 로그 저장 시 용량 증가율 분석

전통적으로 웹 서버의 액세스 로그(access.log)에는 요청 본문(Post-body)이 포함되지 않습니다. 이는 기본 설정에서 본문 로그가 제공되지 않으며, 본문 로그로 인해 용량 증가를 우려하기 때문입니다. 그러나, 본문 로그는 웹 방화벽(WAF) 우회 공격을 방지하고 보안을 강화하기 위해 필수적입니다.

<!--more-->

![요청 본문 로그 저장 분석](https://blog.plura.io/cdn/column/request_body_log_increase.jpg)

---

### 1. **요청 본문 로그 저장의 필요성**

- **보안 강화:** 본문 로그 없이 액세스 로그만으로는 특정 공격을 탐지하거나 분석하기 어렵습니다.
- **WAF 우회 공격 대응:** 본문 로그를 저장하면 WAF 우회 공격과 같은 위협에 효과적으로 대응할 수 있습니다. [1]
- **디버깅 및 분석:** 요청 본문은 트래픽 분석과 디버깅을 위해 유용한 정보를 제공합니다.

---

### 2. **스토리지 증가율 예측**

#### **Q1. 요청 본문 로그를 저장하면 얼마나 증가할까요?**

요청 본문을 로그로 저장하면, **요청 크기**에 따라 로그 파일의 용량이 증가합니다. 일반적으로:

- 요청 본문이 클수록 로그 크기 증가폭이 큽니다.
- POST 요청 비율이 높을수록 로그 파일 크기가 더 많이 증가합니다.

#### **Q2. 평균적으로 몇 % 증가할까요?**

요청 본문 크기가 다양하기 때문에 정확한 증가율을 예측하기는 어렵습니다. 그러나 일반적인 증가율은 다음과 같습니다:

- 평균적으로 **30%에서 50%** 증가 예상
- 예시: 현재 로그 파일 크기가 100GB인 경우, 요청 본문을 추가로 저장하면 **130GB에서 150GB**로 증가할 가능성 있음

#### **Q3. 스토리지 요구 사항 산정**

예측된 증가율을 바탕으로 스토리지 용량을 계획해야 합니다:

1. **기존 로그 크기 확인:** 현재 로그 파일 크기를 기준으로 증가율 적용
2. **POST 요청 비율 분석:** POST 요청이 전체 요청에서 차지하는 비중 파악
3. **로그 압축 및 관리:** 로그 파일 압축 및 롤링 정책을 활용하여 스토리지 요구량 최적화

---

### 3. **로그 저장 최적화 방안**

- **로그 압축:** Gzip과 같은 압축 기술을 활용하여 로그 파일 크기를 줄일 수 있습니다.
- **로그 롤링:** 일정 주기마다 로그 파일을 분리하여 스토리지 관리 효율화
- **보안 우선:** 용량 증가가 우려되더라도, 보안을 강화하기 위해 요청 본문 로그 저장은 권장됩니다.

---

### ✍️ 결론

요청 본문 로그를 저장하면 로그 용량이 평균적으로 30%에서 50% 증가할 수 있습니다. 이는 보안을 강화하고 WAF 우회 공격을 방지하기 위해 필수적입니다. 스토리지 요구 사항을 미리 예측하고, 압축 및 로그 롤링과 같은 관리 방안을 통해 효율적으로 대응할 수 있습니다.

---

### 🔗 참고 자료
- [1] 웹방화벽 우회 공격 어떻게 대응할 수 있을까요?  
  http://blog.plura.io/?p=19174

---

