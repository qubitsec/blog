---
date: 2025-01-31
draft: false
title: "얼마나 많은 사용자가 온프레미스 환경에서 인라인 WAF를 사용할까?"
description: "실제로 온프레미스 환경에서 인라인 WAF는 얼마나 많이 사용되고 있을까요?"
featured_image: "cdn/column/waf-img.png"
tags: ["PLURA-WAF", "웹방화벽", "인라인", "리버스 프록시", "보안", "PLURA-XDR"]
---

🔍 온프레미스 환경에서 웹 애플리케이션 보안을 강화하기 위해 웹방화벽(WAF)이 필수적으로 사용됩니다. 웹방화벽의 배포 방식에는 대표적으로 인라인 모드와 리버스 프록시 모드가 존재하며, 기업들은 각 환경에 맞춰 적절한 방식을 채택합니다. 그렇다면 실제로 온프레미스 환경에서 인라인 WAF는 얼마나 많이 사용되고 있을까요?

<!--more-->
![waf](https://blog.plura.io/cdn/column/waf-img.png)
---

### 1. 웹방화벽의 두 가지 배포 모드

### ✅ 인라인 모드 (Inline Mode) – 하지만 위험할 수도 있다!

- **🔥 장점: 네트워크 경로에 직접 배치되어 추가적인 라우팅 설정이 필요 없습니다.**
- **🚨 단점: 장애 발생 시 트래픽 차단 위험, 네트워크 병목 가능성, 디도스 공격 시 취약성이 존재합니다.**
- 디도스 공격 시, 인라인 모드의 WAF가 다운되면 웹 서비스 전체가 마비될 위험이 큽니다.
- 실제로 인라인 방식 사용 중 과부하로 인해 WAF가 장애를 겪고 서비스가 중단된 사례가 적지 않습니다.

![Inline](https://github.com/user-attachments/assets/89f0d33c-8402-436c-a92a-b350fab111f8)

### ✅ 리버스 프록시 모드 (Reverse Proxy Mode) – 더 안전한 선택!

- **🔥 장점: 높은 유연성, 장애 발생 시 트래픽 우회 가능, 디도스 방어 효과적!**
- 클라이언트와 서버 사이에서 **트래픽을 중개**하는 방식입니다.
- SSL 종료, 로드 밸런싱 등 **추가적인 성능 최적화가 가능합니다**.
- WAF가 다운될 경우 **트래픽을 차단(Fail-close)하는** 방식을 사용하여 공격이 직접 웹 서버에 전달되지 않도록 합니다.

📌 **그러나 주의할 점:**

- 일부 환경에서는 **Fail-open(우회) 설정이 되어 있는 경우**, WAF가 다운되면 웹 서버로 직접 트래픽이 전달될 수도 있음.

![reverse_proxy](https://github.com/user-attachments/assets/f3c5955d-5d4c-451e-b7b8-6f7cf7e497a6)


---

### 2. 인라인 방식은 편리하지만, 리버스 프록시 방식이 더 안전하다

💡 많은 기업들이 인라인 방식을 선택하는 이유는 **배포가 간단하고, 네트워크 변경 없이 빠르게 적용할 수 있기 때문**입니다. 또한, 모든 트래픽을 실시간으로 검사하여 즉각적인 차단이 가능하다는 점도 장점으로 꼽힙니다. 그러나 **보안 측면에서 인라인 방식은 치명적인 단점을 가질 수 있습니다.**

### 📊 온프레미스 WAF 배포 방식 선호도

- **인라인 모드 사용률:** 50~70%
- **리버스 프록시 모드 사용률:** 30~50%

### ⚠️ 인라인 방식의 보안 위험

- 디도스 공격이 발생하면 WAF가 과부하로 다운될 위험이 높음.
- WAF가 다운되면 모든 트래픽이 웹 서버로 그대로 전달될 수 있음.
- 공격자가 이를 노리고 SQL 인젝션, XSS 등 추가적인 웹 공격을 시도할 가능성이 커짐.

### 🔄 리버스 프록시 방식의 보안적 우위

- 리버스 프록시 방식에서는 클라이언트 요청이 WAF를 반드시 거쳐야 하므로, WAF가 다운되면 정상적인 요청과 공격 트래픽 모두 웹 서버에 도달하지 않음.
- WAF가 다운되더라도 웹 서버와 직접 통신하지 않기 때문에, 공격이 직접적으로 전달되지 않음.

📌 **그러나 주의할 점:**

- 일부 환경에서는 **Fail-open(우회) 설정이 되어 있는 경우**, WAF가 다운되면 웹 서버로 직접 트래픽이 전달될 수도 있음.

📌 **결론적으로, 인라인 방식은 편리함 때문에 많이 사용되지만, 보안성을 고려한다면 리버스 프록시 방식이 더 나은 선택이 될 수 있습니다.**

---

### 3. 비용 고려: 리버스 프록시 방식의 단점

💰 **기존 망에서 리버스 프록시 WAF를 설치하는 경우, 비용이 높을 수 있습니다.**

- 온프레미스 환경에서 리버스 프록시 WAF를 새로 구축하려면 네트워크 구조를 변경해야 할 수도 있으며, 추가적인 하드웨어(WAF 장비) 및 설정 비용이 발생할 수 있습니다.
- 반면, 클라우드 기반 WAF(예: AWS WAF, Cloudflare, Akamai)는 구축 비용이 상대적으로 낮습니다.

**💡 PLURA-XDR: 클라우드 기반 WAF를 제공하여, 기업의 서버와 클라우드 리소스를 안전하게 보호해 줍니다.**

---

### 4. 결론

✅ **온프레미스 환경에서 인라인 WAF는 여전히 널리 사용되고 있으며, 약 50~70%의 사용률을 기록합니다.** 그러나 높은 유연성을 제공하는 **리버스 프록시 모드가 점점 더 선호되고 있는 추세**입니다.

✅ **디도스 공격 대응 측면에서 리버스 프록시 방식이 더욱 강력한 보호를 제공하며, 특히 대규모 환경에서 필수적으로 고려해야 할 요소입니다.**

✅ **인라인 방식의 한계를 극복하기 위해 리버스 프록시 방식 도입이 필요하며, 이를 통해 보안성과 성능을 동시에 확보할 수 있습니다.**

📢 **귀사의 WAF는 어떤 방식으로 운영되고 있습니까? 인라인 모드와 리버스 프록시 모드 중 어느 것이 더 적합할지 고민 중이라면, 보안 및 네트워크 아키텍처를 종합적으로 분석하는 것이 중요합니다.**
