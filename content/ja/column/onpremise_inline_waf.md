---
date: 2025-01-31
draft: false
title: "どのくらいのユーザーがオンプレミス環境でインラインWAFを使用できますか？"
description: "実際、オンプレミス環境でインラインWAFはどのくらい使用されていますか？"
featured_image: "cdn/column/waf-img.png"
tags: ["PLURA-WAF", "Webファイアウォール", "インライン", "リバースプロキシ", "セキュリティ", "PLURA-XDR"]
---

🔍 **オンプレミス環境におけるWebアプリケーションのセキュリティ強化には、Webアプリケーションファイアウォール（WAF）が不可欠です。**  
WAFの導入方式には、大きく分けて**インラインモード**と**リバースプロキシモード**の2種類があり、  
企業は自社の環境に最適な方式を選択しています。  

それでは、**実際のオンプレミス環境において、インラインWAFはどの程度使用されているのでしょうか？**

<!--more-->
![waf](https://blog.plura.io/cdn/column/waf-img.png)
---

### 1. **Webアプリケーションファイアウォール（WAF）の2つの導入モード**

### ✅ **インラインモード（Inline Mode） – しかしリスクも伴う！**

- **🔥 メリット:**  
  - ネットワーク経路上に直接配置されるため、**追加のルーティング設定が不要**。  
  - アプリケーションのトラフィックをリアルタイムで監視・フィルタリング可能。  

- **🚨 デメリット:**  
  - **障害発生時にトラフィックが遮断されるリスク**がある。  
  - **ネットワークのボトルネック**になり得る。  
  - **DDoS攻撃に対する脆弱性**が存在する。  

- **注意点:**  
  - DDoS攻撃が発生した場合、インラインWAFがダウンすると**Webサービス全体が機能停止**するリスクが高い。  
  - 実際にインライン方式を採用した企業が、**過負荷によるWAF障害でサービス停止**を経験した事例も少なくない。  

![Inline](https://github.com/user-attachments/assets/89f0d33c-8402-436c-a92a-b350fab111f8)

### ✅ **リバースプロキシモード（Reverse Proxy Mode） – より安全な選択！**

- **🔥 メリット:**  
  - **高い柔軟性**を持ち、障害発生時には**トラフィックの迂回が可能**。  
  - **DDoS攻撃に対して効果的**な防御が可能。  
  - クライアントとサーバーの間で**トラフィックを中継**し、セキュリティを強化。  
  - **SSL終端（SSL Termination）**や**ロードバランシング**などの**パフォーマンス最適化**が可能。  
  - WAFがダウンした場合でも、**Fail-close設定**によって攻撃が直接Webサーバーに届くのを防げる。  

📌 **注意点:**  
- 一部の環境では、**Fail-open（バイパス）設定**が有効になっている場合、  
  WAFがダウンすると**トラフィックが直接Webサーバーに送信されるリスク**がある。  

![reverse_proxy](https://github.com/user-attachments/assets/f3c5955d-5d4c-451e-b7b8-6f7cf7e497a6)


---

### 2. **インライン方式は便利だが、リバースプロキシ方式の方が安全**

💡 **多くの企業がインライン方式を選択する理由は、**  
- **導入が容易**であり、ネットワーク設定を変更せずにすぐ適用できること。  
- すべてのトラフィックをリアルタイムで検査し、**即時にブロックできる点**もメリットとして挙げられる。  

しかし、**セキュリティの観点では、インライン方式には重大な欠点がある**。

### 📊 **オンプレミスWAFの導入方式の選好度**
- **インラインモードの採用率:** **50～70%**  
- **リバースプロキシモードの採用率:** **30～50%**  

### ⚠️ **インライン方式のセキュリティリスク**
- **DDoS攻撃**によってWAFが過負荷になり、ダウンする可能性が高い。  
- **WAFがダウンすると、すべてのトラフィックがWebサーバーに直接流れる**。  
- 攻撃者がこれを悪用し、**SQLインジェクション、XSS**などの追加攻撃を仕掛けるリスクが高まる。  

### 🔄 **リバースプロキシ方式のセキュリティ的優位性**
- クライアントのリクエストは必ず**WAFを経由するため、WAFがダウンしても攻撃トラフィックがWebサーバーに直接到達しない**。  
- **WAFが機能停止しても、Webサーバーと直接通信しないため、攻撃の影響を最小限に抑えられる**。  

📌 **注意点:**  
- **Fail-open（バイパス）設定**になっている環境では、WAFがダウンすると**Webサーバーにトラフィックが直接送られる**可能性がある。  

📌 **結論:**  
- **インライン方式は導入が簡単なため多く利用されるが、セキュリティを考慮するとリバースプロキシ方式の方が優れた選択肢となる**。

---

### 3. **コスト面の考慮: リバースプロキシ方式のデメリット**

💰 **オンプレミス環境でリバースプロキシWAFを導入する場合、コストが高くなる可能性がある。**

- **ネットワーク構造の変更が必要な場合があり、追加のハードウェア（WAF機器）や設定コストが発生**する。  
- 一方で、**クラウドベースのWAF（例: AWS WAF、Cloudflare、Akamai）**は、  
  **導入コストが比較的低く、スケーラビリティも高い**。

**💡 PLURA-XDR: クラウドベースのWAFを提供し、企業のサーバーやクラウドリソースを安全に保護。**  

---

### 4. **結論**

✅ **オンプレミス環境では依然としてインラインWAFが広く使用されており、約50～70%の導入率を記録。**  
   しかし、**より柔軟な運用が可能なリバースプロキシ方式が徐々に主流になりつつある。**

✅ **DDoS攻撃への対応力において、リバースプロキシ方式はより強力な防御を提供し、特に大規模環境では必須の要素。**

✅ **インライン方式の限界を克服するため、リバースプロキシ方式の導入を検討することで、セキュリティとパフォーマンスの両方を確保可能。**

📢 **貴社のWAFはどの方式を採用していますか？**  
インラインモードとリバースプロキシモードのどちらが適しているかを検討する際は、  
**セキュリティ要件とネットワークアーキテクチャの総合的な分析が不可欠**です。
